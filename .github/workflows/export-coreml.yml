name: Export CoreML Model

on:
  workflow_dispatch:

jobs:
  export-coreml:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install dependencies
        run: |
          pip install torch==2.5.0 torchvision==0.16.0 diffusers huggingface_hub coremltools

      - name: Convert model to CoreML
        run: |
          import torch
          from diffusers import StableDiffusionPipeline
          from huggingface_hub import snapshot_download
          import
